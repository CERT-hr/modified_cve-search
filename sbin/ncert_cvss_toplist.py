
#!/usr/bin/env python3

import os
import sys

#runPath = os.getcwd() #radni direktorij
runPath = os.path.dirname(os.path.realpath(__file__))
sys.path.append(os.path.join(runPath, "..")) #dodaj parent dir u PATH varijablu

from redis import exceptions as redisExceptions

from lib.Config import Configuration
from lib.Toolkit import pad
import lib.DatabaseLayer as data #cve-search lib za rad s bazom

import ncert_get as nget

from datetime import date, datetime, timedelta


today = date.today()


cvss=[]
idd=[]
dict_list=nget.getCVEolder(datetime.now() - timedelta(days=10))

def find_max(lista):
    for i in lista:
        if i["cvss"]!=None:
            i["cvss"]=float(i["cvss"])
            cvss.append(i["cvss"])
            idd.append(i["id"])
        rez=list(zip(idd,cvss))
        rez=sorted(rez,key=lambda i: i[1],reverse=True)[:10]

    return rez

print(find_max(dict_list))


#print(top_list_dict)
#for i in top_list_dict:
#	if i["cvss"]!=None:
		#if float(i["cvss"])>7:
			#idd.append(i["id"])
			#cvss.append(i["cvss"])
			#print(i["id"],i["cvss"]
#rez=list(zip(idd,cvss))
#print(rez)
